<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>24h du Mans - Test voiture</title>
<style>
  #track {
    width: 100%;
    max-width: 1536px;
    aspect-ratio: 1536 / 1024;
    background: url('images/Circuit.jpeg') center/cover no-repeat;
    position: relative;
    border: 2px solid #333;
  }

  .car {
    position: absolute;
  }

  .car img {
    width: 40px;   /* largeur de la voiture */
    height: auto;  /* garde les proportions */
  }
</style>
</head>
<body>
<h1>Test voiture</h1>
<div id="track"></div>

<script>
const TRACK_POINTS = [
  {"x":845,"y":700}  // un seul point pour tester
];

// Simulation d’une voiture directement dans JS (pas besoin de Firebase pour le test)
const cars = {
  car1: {
    name: "Voiture Rouge",
    pos: 0,
    img: "images/Pin_red.png"
  }
};

function drawCars() {
  const trackDiv = document.getElementById('track');
  trackDiv.innerHTML = '';
  
  for(const id in cars) {
    const car = cars[id];
    const div = document.createElement('div');
    div.className = 'car';

    const img = document.createElement('img');
    img.src = car.img;
    img.alt = car.name;

    // On centre la voiture sur le point une fois l'image chargée
    img.onload = () => {
      div.style.left = (TRACK_POINTS[car.pos].x - img.width/2) + 'px';
      div.style.top  = (TRACK_POINTS[car.pos].y - img.height/2) + 'px';
    };

    div.appendChild(img);
    trackDiv.appendChild(div);
  }
}

drawCars();
</script>
</body>
</html>
